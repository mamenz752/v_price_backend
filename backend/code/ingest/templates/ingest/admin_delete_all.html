{% extends "admin/base_site.html" %}
{% load i18n admin_urls static %}

{% block extrastyle %}{{ block.super }}
<link rel="stylesheet" type="text/css" href="{% static 'admin/css/forms.css' %}">
<style>
    .delete-button {
        display: block;
        padding: 15px;
        background-color: #ba2121;
        color: white;
        text-decoration: none;
        text-align: center;
        border-radius: 4px;
        margin: 20px 0;
        font-size: 16px;
        font-weight: bold;
        transition: background-color 0.3s;
    }
    .delete-button:hover {
        background-color: #a41515;
    }
    .warning {
        color: #ba2121;
        font-weight: bold;
    }
</style>
{% endblock %}

{% block content %}
<div id="content-main">
    <h1>{{ title }}</h1>
    
    {% if messages %}
    <ul class="messagelist">
        {% for message in messages %}
        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
        {% endfor %}
    </ul>
    {% endif %}
    
    {% if success %}
    <div class="module">
        <h2>蜑企勁邨先棡</h2>
        
        <ul>
            {% if deleted_price_count is not None %}
            <li>萓｡譬ｼ繝・・繧ｿ: {{ deleted_price_count }}莉ｶ 蜑企勁</li>
            {% endif %}
            {% if deleted_weather_count is not None %}
            <li>豌苓ｱ｡繝・・繧ｿ: {{ deleted_weather_count }}莉ｶ 蜑企勁</li>
            {% endif %}
        </ul>
        
        <p><a href="{% url 'admin:index' %}" class="button">邂｡逅・判髱｢縺ｫ謌ｻ繧・/a></p>
    </div>
    {% else %}
    <div class="module">
        <h2>繝・・繧ｿ蜑企勁縺ｮ遒ｺ隱・/h2>
        
        <p class="warning">隴ｦ蜻・ 縺薙・謫堺ｽ懊・蜿悶ｊ豸医○縺ｾ縺帙ｓ縲る∈謚槭＠縺溘ョ繝ｼ繧ｿ縺ｯ螳悟・縺ｫ蜑企勁縺輔ｌ縺ｾ縺吶・/p>
        
        <p>迴ｾ蝨ｨ縺ｮ繝・・繧ｿ莉ｶ謨ｰ:</p>
        <ul>
            <li>萓｡譬ｼ繝・・繧ｿ: {{ price_count }}莉ｶ</li>
            <li>豌苓ｱ｡繝・・繧ｿ: {{ weather_count }}莉ｶ</li>
        </ul>
        
        <form method="post">
            {% csrf_token %}
            
            <fieldset class="module aligned">
                <h2>蜑企勁蟇ｾ雎｡縺ｮ驕ｸ謚・/h2>
                
                <div class="form-row">
                    <div>
                        <label for="delete_price">
                            <input type="checkbox" name="delete_price" id="delete_price">
                            萓｡譬ｼ繝・・繧ｿ繧貞炎髯､
                        </label>
                    </div>
                </div>
                
                <div class="form-row">
                    <div>
                        <label for="delete_weather">
                            <input type="checkbox" name="delete_weather" id="delete_weather">
                            豌苓ｱ｡繝・・繧ｿ繧貞炎髯､
                        </label>
                    </div>
                </div>
            </fieldset>
            
            <div class="submit-row">
                <input type="submit" value="驕ｸ謚槭＠縺溘ョ繝ｼ繧ｿ繧貞炎髯､" class="delete-button" name="_delete">
                <a href="{% url 'admin:index' %}" class="button cancel-link">繧ｭ繝｣繝ｳ繧ｻ繝ｫ</a>
            </div>
        </form>
    </div>
    {% endif %}
    
    <div class="module">
        <h2>繝ｪ繝ｳ繧ｯ</h2>
        <ul>
            <li><a href="{% url 'admin:ingest_ingestmarket_changelist' %}">萓｡譬ｼ繝・・繧ｿ荳隕ｧ</a></li>
            <li><a href="{% url 'admin:ingest_ingestweather_changelist' %}">豌苓ｱ｡繝・・繧ｿ荳隕ｧ</a></li>
            <li><a href="{% url 'admin:index' %}">邂｡逅・・繝ｼ繝</a></li>
        </ul>
    </div>
</div>
{% endblock %}
